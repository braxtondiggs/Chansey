<section
  class="flex items-center justify-center min-h-screen mx-auto animate-fadein animate-duration-300 animate-ease-in lg:items-start"
>
  <div class="flex justify-center w-full h-full gap-12">
    <div class="flex flex-col p-20 lg:min-w-[40rem]">
      <a routerLink="/" class="flex items-center justify-center mb-8">
        <app-lazy-image className="w-auto h-24 object-contain object-left" src="/public/icon.png" alt="Auth Image" />
        <h5 class="font-normal title-h5 whitespace-nowrap">Cymbit Trading</h5>
      </a>
      <div class="flex flex-col justify-center flex-grow">
        <div class="w-full max-w-md mx-auto">
          <h5 class="text-center title-h5 lg:text-left">Reset Password</h5>
          <p class="mt-4 text-center body-small lg:text-left">Please enter your new password below.</p>

          <!-- Error message for invalid/missing token -->
          <p-message
            *ngIf="errorMessage && !formSubmitted"
            [text]="errorMessage"
            icon="pi pi-times-circle"
            severity="error"
            styleClass="mt-4 w-full"
          />

          <form [formGroup]="newPasswordForm" (ngSubmit)="onSubmit()" class="mt-8">
            <p-floatlabel variant="on" class="mt-4">
              <p-password
                formControlName="password"
                size="large"
                [inputStyle]="{ width: '100%' }"
                [style]="{ width: '100%' }"
                [toggleMask]="true"
                required
              >
                <ng-template #footer>
                  <ul class="pl-2 my-0 ml-2 leading-normal">
                    <li>At least one lowercase</li>
                    <li>At least one uppercase</li>
                    <li>At least one numeric</li>
                    <li>At least one special character</li>
                    <li>Minimum 8 characters</li>
                  </ul>
                </ng-template>
              </p-password>
              <label for="on_label">Password</label>
            </p-floatlabel>
            <small *ngIf="newPasswordForm.get('password')?.invalid" class="text-red-500">
              {{ getPasswordError('password') }}
            </small>
            <p-floatlabel variant="on" class="mt-4">
              <p-password
                formControlName="confirmPassword"
                size="large"
                [inputStyle]="{ width: '100%' }"
                [style]="{ width: '100%' }"
                [toggleMask]="true"
                [feedback]="false"
                required
              />
              <label for="on_label">Confirm Password</label>
            </p-floatlabel>
            <small *ngIf="formSubmitted && newPasswordForm.get('confirmPassword')?.invalid" class="text-red-500">
              Password confirmation is required
            </small>
            <small
              *ngIf="
                formSubmitted &&
                newPasswordForm.get('confirmPassword')?.valid &&
                newPasswordForm.hasError('passwordMismatch')
              "
              class="text-red-500"
            >
              Passwords do not match
            </small>

            <p-message
              *ngIf="errorMessage && formSubmitted"
              [text]="errorMessage"
              icon="pi pi-times-circle"
              severity="error"
              styleClass="mt-4 w-full"
            />
            <p-message
              *ngIf="successMessage"
              [text]="successMessage"
              icon="pi pi-check-circle"
              severity="success"
              size="large"
              styleClass="mt-4 w-full"
            />
            <p-button
              type="submit"
              class="block w-full mt-8"
              [loading]="isLoading"
              [raised]="true"
              [style]="{ width: '100%' }"
            >
              <span>Reset Password</span>
            </p-button>
          </form>
          <div class="mt-8 text-center body-small lg:text-left">
            Return to <a routerLink="/login" class="text-primary-500 hover:underline">Login</a>
          </div>
        </div>
      </div>
    </div>
    <div class="hidden h-full py-20 landing-container lg:flex">
      <div
        class="mx-auto flex h-screen w-full items-center justify-center overflow-hidden lg:max-w-[32.5rem] xl:max-w-[60.5rem]"
      >
        <app-lazy-image
          className="w-auto h-screen object-contain object-left"
          src="/public/landing/auth/forgot-welcome.png"
          alt="Auth Image"
        />
      </div>
    </div>
  </div>
</section>
